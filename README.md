#标签权重计算

用户在不同标签上的偏好是通过权重来反映的，权重越高，说明用户在该标签上的偏好越强，反之亦然。而且，这个权重会随着时间变化而变化，标签权重的计算主要通过TF-IDF算法

1）TF-IDF算法思想

用户标签权重，是由该标签对用户本身的重要性（TF-IDF权重）与该标签在业务上对用户的重要性（业务权重）两者共同决定的
> 即：用户标签权重 = 业务权重* TF-IDF权重。

TF-IDF权重是通过TF-IDF计算得到的，业务权重是通过用户对标签的行为来决定的
> 即：业务权重=行为类型权重 * 行为次数 * 时间衰减

2）行为类型权重

用户浏览、点击、搜索、收藏、分享、下单、购买等不同行为对用户而且有不同重要性，一般根据业务经验或者使用层次分析法定义一个基本行为权重

3）行为次数

这里的行为次数表示每一种行为的次数

4）时间衰减

时间衰减是指用户的行为会随着时间的流逝，用户偏好会不断减弱。在建立与时间衰减相关的函数时，我们可套用牛顿冷却定律数学模型。
牛顿冷却定律：较热物体的温度F(t)是随着时间t的增长而呈现指数型衰减，其温度衰减公式为：

> F(t)=T*exp(-α*t)

> T：初始温度

>α：衰减常数即冷却系数，是自己定义的数值，一般通过回归可计算得出

>t：时间间隔

冷却系数是自己定义的数值，一般通过回归可计算得出。例如：初始偏好设置为1，1天后的偏好为0.85，即 0.85=1*exp(-α*1)，求得α=0.16，这个就是标签的冷却系数

5) demo

用户“小美”，对于标签“口红”的权重计算：假设我们之前定义冷却系数α=0.16，基于业务经验或通过层次分析法假设行为类型权重：点击（0.1）、浏览（0.2）、分享（0.5）、收藏加购（0.6）、支付（0.9）

小美的每日行为表：

2021-05-01：

![image](https://github.com/Maplejw/tag/assets/24646597/30e0d542-a393-4702-a905-7c759a27968b)

2021-05-02：

![image](https://github.com/Maplejw/tag/assets/24646597/374f30f4-b1aa-4e18-908b-eb9c00716b6e)

2021-05-03：

![image](https://github.com/Maplejw/tag/assets/24646597/c48ada10-bc67-4c34-9a69-6ec991400da3)

```
用户“小美”对标签“口红”每天的权重：

2021-05-01：2*0.1+2*0.2+3*0.6+1*0.5+1*0.9=3.8

2021-05-02：3.8 *exp(-α*1)+1*0.1+1*0.2+2*0.6+1*0.5+0=5.06

2021-05-03：5.067718*exp(-α*1)= 4.32

这样算下来是不是就很清晰了。
```
